<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>AOSP | Gridea</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://huts1234.github.io/favicon.ico?v=1764722134508">
<link rel="stylesheet" href="https://huts1234.github.io/styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="Android å¼€æºé¡¹ç›®ï¼ˆAOSPï¼‰å®Œå…¨æŒ‡å—ï¼šæ„å»ºã€å®šåˆ¶ä¸è´¡çŒ®

ä¸€ã€AOSP çš„æ ¸å¿ƒæ¦‚å¿µ
AOSPï¼ˆAndroid Open Source Projectï¼‰ æ˜¯ Android æ“ä½œç³»ç»Ÿçš„å¼€æºä»£ç åº“ï¼Œæä¾›å®Œæ•´çš„ç³»ç»Ÿæ¡†æ¶ã€åŸç”Ÿåº”ç”¨åŠåº•å±‚é©±åŠ¨..." />
    <meta name="keywords" content="" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://huts1234.github.io">
        <img src="https://huts1234.github.io/images/avatar.png?v=1764722134508" class="site-logo">
        <h1 class="site-title">Gridea</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            é¦–é¡µ
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            å½’æ¡£
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            æ ‡ç­¾
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            å…³äº
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      æ¸©æ•…è€ŒçŸ¥æ–°
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://huts1234.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">AOSP</h2>
            <div class="post-date">2025-11-28</div>
            
            <div class="post-content" v-pre>
              <h1 id="android-å¼€æºé¡¹ç›®aospå®Œå…¨æŒ‡å—æ„å»º-å®šåˆ¶ä¸è´¡çŒ®">Android å¼€æºé¡¹ç›®ï¼ˆAOSPï¼‰å®Œå…¨æŒ‡å—ï¼šæ„å»ºã€å®šåˆ¶ä¸è´¡çŒ®</h1>
<hr>
<h2 id="ä¸€-aosp-çš„æ ¸å¿ƒæ¦‚å¿µ">ä¸€ã€AOSP çš„æ ¸å¿ƒæ¦‚å¿µ</h2>
<p><strong>AOSPï¼ˆAndroid Open Source Projectï¼‰</strong> æ˜¯ Android æ“ä½œç³»ç»Ÿçš„å¼€æºä»£ç åº“ï¼Œæä¾›å®Œæ•´çš„ç³»ç»Ÿæ¡†æ¶ã€åŸç”Ÿåº”ç”¨åŠåº•å±‚é©±åŠ¨æ”¯æŒã€‚ä¸å‚å•†å®šåˆ¶ ROM ç›¸æ¯”ï¼ŒAOSP çš„ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>çº¯å‡€æ€§</strong>ï¼šæ—  Google æœåŠ¡ï¼ˆGMSï¼‰åŠç¬¬ä¸‰æ–¹é¢„è£…åº”ç”¨</li>
<li><strong>å¯å®šåˆ¶æ€§</strong>ï¼šå…è®¸æ·±åº¦ä¿®æ”¹ç³»ç»Ÿç»„ä»¶ï¼ˆå¦‚å†…æ ¸ã€Framework å±‚ï¼‰</li>
<li><strong>å¼€å‘ç”¨é€”</strong>ï¼šç”¨äºå­¦ä¹ ç³»ç»Ÿæ¶æ„ã€å¼€å‘æ–°è®¾å¤‡ç³»ç»Ÿæˆ–åˆè§„å®šåˆ¶</li>
</ul>
<hr>
<h2 id="äºŒ-aosp-ä»£ç ç»“æ„è§£æ">äºŒã€AOSP ä»£ç ç»“æ„è§£æ</h2>
<h3 id="1-å…³é”®ç›®å½•è¯´æ˜">1. å…³é”®ç›®å½•è¯´æ˜</h3>
<table>
<thead>
<tr>
<th><strong>ç›®å½•è·¯å¾„</strong></th>
<th><strong>å†…å®¹</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>frameworks/base</code></td>
<td>ç³»ç»Ÿæ ¸å¿ƒæœåŠ¡ï¼ˆActivityManagerã€PackageManagerï¼‰</td>
</tr>
<tr>
<td><code>packages/apps</code></td>
<td>é¢„è£…åº”ç”¨ï¼ˆSettingsã€Launcherï¼‰</td>
</tr>
<tr>
<td><code>system/core</code></td>
<td>æ ¸å¿ƒå·¥å…·ï¼ˆlogcatã€adbï¼‰åŠ init è¿›ç¨‹</td>
</tr>
<tr>
<td><code>kernel/</code></td>
<td>Linux å†…æ ¸æºç ï¼ˆå„å‚å•†åˆ†æ”¯å¦‚ <code>msm</code>ã€<code>exynos</code>ï¼‰</td>
</tr>
<tr>
<td><code>hardware/</code></td>
<td>HALï¼ˆç¡¬ä»¶æŠ½è±¡å±‚ï¼‰åŠå‚å•†é©±åŠ¨æ¥å£</td>
</tr>
</tbody>
</table>
<h3 id="2-æ ¸å¿ƒç»„ä»¶ä¾èµ–">2. æ ¸å¿ƒç»„ä»¶ä¾èµ–</h3>
<pre><code class="language-mermaid">graph TD
    A[Linux Kernel] --&gt; B[HAL]
    B --&gt; C[Android Runtime (ART)]
    C --&gt; D[Framework Services]
    D --&gt; E[System Apps]
</code></pre>
<hr>
<h2 id="ä¸‰-ç¯å¢ƒé…ç½®ä¸ä»£ç ä¸‹è½½">ä¸‰ã€ç¯å¢ƒé…ç½®ä¸ä»£ç ä¸‹è½½</h2>
<h3 id="1-ç³»ç»Ÿè¦æ±‚">1. ç³»ç»Ÿè¦æ±‚</h3>
<ul>
<li><strong>æ“ä½œç³»ç»Ÿ</strong>ï¼šUbuntu 20.04/22.04ï¼ˆå®˜æ–¹æ¨èï¼‰æˆ– macOSï¼ˆéƒ¨åˆ†åŠŸèƒ½å—é™ï¼‰</li>
<li><strong>å†…å­˜</strong>ï¼š16GB ä»¥ä¸Šï¼ˆæ¨è 32GBï¼‰</li>
<li><strong>å­˜å‚¨</strong>ï¼šè‡³å°‘ 300GB å¯ç”¨ç©ºé—´ï¼ˆå®Œæ•´ç¼–è¯‘éœ€ 500GB+ï¼‰</li>
</ul>
<h3 id="2-å®‰è£…ä¾èµ–å·¥å…·">2. å®‰è£…ä¾èµ–å·¥å…·</h3>
<pre><code class="language-bash"># Ubuntu ç¯å¢ƒ
sudo apt update &amp;&amp; sudo apt install -y git-core gnupg flex bison build-essential zip curl zlib1g-dev gcc-multilib g++-multilib libc6-dev-i386 lib32ncurses5-dev x11proto-core-dev libx11-dev lib32z1-dev libgl1-mesa-dev libxml2-utils xsltproc unzip fontconfig python3 bc imagemagick ccache
</code></pre>
<h3 id="3-ä¸‹è½½æºç ">3. ä¸‹è½½æºç </h3>
<pre><code class="language-bash"># å®‰è£… repo å·¥å…·
mkdir ~/bin
curl https://storage.googleapis.com/git-repo-downloads/repo &gt; ~/bin/repo
chmod a+x ~/bin/repo

# åˆå§‹åŒ–ä»“åº“ï¼ˆä»¥ Android 14 ä¸ºä¾‹ï¼‰
mkdir aosp &amp;&amp; cd aosp
repo init -u https://android.googlesource.com/platform/manifest -b android-14.0.0_r1
repo sync -j$(nproc) --no-clone-bundle
</code></pre>
<hr>
<h2 id="å››-ç¼–è¯‘ä¸åˆ·æœºæµç¨‹">å››ã€ç¼–è¯‘ä¸åˆ·æœºæµç¨‹</h2>
<h3 id="1-é€‰æ‹©æ„å»ºç›®æ ‡">1. é€‰æ‹©æ„å»ºç›®æ ‡</h3>
<pre><code class="language-bash"># æŸ¥è¯¢è®¾å¤‡ä»£å·ï¼ˆå¦‚ Pixel 7 ä»£å· pantherï¼‰
source build/envsetup.sh
lunch
# é€‰æ‹© aosp_panther-userdebug
</code></pre>
<h3 id="2-å¼€å§‹ç¼–è¯‘">2. å¼€å§‹ç¼–è¯‘</h3>
<pre><code class="language-bash"># å…¨é‡ç¼–è¯‘ï¼ˆé¦–æ¬¡ï¼‰
m -j$(nproc) all

# å¢é‡ç¼–è¯‘ï¼ˆä¿®æ”¹åï¼‰
m -j$(nproc) 
</code></pre>
<h3 id="3-åˆ·å…¥è®¾å¤‡">3. åˆ·å…¥è®¾å¤‡</h3>
<pre><code class="language-bash"># è¿›å…¥ fastboot æ¨¡å¼
adb reboot bootloader

# åˆ·å…¥æ‰€æœ‰åˆ†åŒºï¼ˆéœ€è§£é” Bootloaderï¼‰
fastboot flashall -w
</code></pre>
<hr>
<h2 id="äº”-æ·±åº¦å®šåˆ¶å®è·µ">äº”ã€æ·±åº¦å®šåˆ¶å®è·µ</h2>
<h3 id="1-ä¿®æ”¹ç³»ç»ŸæœåŠ¡">1. ä¿®æ”¹ç³»ç»ŸæœåŠ¡</h3>
<pre><code class="language-java">// frameworks/base/services/core/java/com/android/server/am/ActivityManagerService.java
public void setDebugApp(String packageName, boolean waitForDebugger, boolean persistent) {
    // æ·»åŠ è‡ªå®šä¹‰é€»è¾‘
}
</code></pre>
<h3 id="2-æ·»åŠ ç³»ç»Ÿçº§æƒé™">2. æ·»åŠ ç³»ç»Ÿçº§æƒé™</h3>
<pre><code class="language-xml">&lt;!-- frameworks/base/core/res/AndroidManifest.xml --&gt;
&lt;permission android:name=&quot;android.permission.CUSTOM_PERMISSION&quot;
    android:protectionLevel=&quot;signature&quot; /&gt;
</code></pre>
<h3 id="3-é›†æˆè‡ªå®šä¹‰å†…æ ¸">3. é›†æˆè‡ªå®šä¹‰å†…æ ¸</h3>
<pre><code class="language-bash"># æ›¿æ¢å†…æ ¸æºç 
git clone https://github.com/your-kernel-repo kernel/msm
make -C kernel/msm O=out ARCH=arm64 your_defconfig
make -C kernel/msm O=out ARCH=arm64 -j$(nproc)
cp out/arch/arm64/boot/Image.gz-dtb $AOSP/device/google/panther-kernel/
</code></pre>
<hr>
<h2 id="å…­-è´¡çŒ®ä»£ç åˆ°-aosp">å…­ã€è´¡çŒ®ä»£ç åˆ° AOSP</h2>
<h3 id="1-ä»£ç æäº¤æµç¨‹">1. ä»£ç æäº¤æµç¨‹</h3>
<ol>
<li>æ³¨å†Œ <a href="https://android-review.googlesource.com/">Google Git è´¦å·</a></li>
<li>åˆ›å»ºæœ¬åœ°åˆ†æ”¯å¼€å‘ï¼š<code>repo start your-feature .</code></li>
<li>æäº¤ Commitï¼š<code>git commit -s</code>ï¼ˆéœ€ç­¾ç½² CLA åè®®ï¼‰</li>
<li>ä¸Šä¼ å®¡æ ¸ï¼š<code>repo upload .</code></li>
</ol>
<h3 id="2-å®¡æ ¸æ ‡å‡†">2. å®¡æ ¸æ ‡å‡†</h3>
<ul>
<li><strong>ä»£ç è§„èŒƒ</strong>ï¼šç¬¦åˆ <a href="https://source.android.com/docs/setup/contribute/code-style">Android ä»£ç é£æ ¼æŒ‡å—</a></li>
<li><strong>æµ‹è¯•è¦†ç›–</strong>ï¼šæ·»åŠ å•å…ƒæµ‹è¯•ï¼ˆJUnitï¼‰æˆ– CTS éªŒè¯ç”¨ä¾‹</li>
<li><strong>å…¼å®¹æ€§</strong>ï¼šç¡®ä¿ä¿®æ”¹ä¸å½±å“ API å…¼å®¹æ€§ï¼ˆé€šè¿‡ <code>make update-api</code> æ›´æ–° APIï¼‰</li>
</ul>
<hr>
<h2 id="ä¸ƒ-å¸¸è§é—®é¢˜ä¸è§£å†³">ä¸ƒã€å¸¸è§é—®é¢˜ä¸è§£å†³</h2>
<h3 id="1-ç¼–è¯‘å¤±è´¥å†…å­˜ä¸è¶³">1. ç¼–è¯‘å¤±è´¥ï¼ˆå†…å­˜ä¸è¶³ï¼‰</h3>
<pre><code class="language-bash"># å¢åŠ äº¤æ¢ç©ºé—´ï¼ˆä¸´æ—¶æ–¹æ¡ˆï¼‰
sudo fallocate -l 32G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
</code></pre>
<h3 id="2-é©±åŠ¨ç¼ºå¤±å‚å•†é—­æºç»„ä»¶">2. é©±åŠ¨ç¼ºå¤±ï¼ˆå‚å•†é—­æºç»„ä»¶ï¼‰</h3>
<ul>
<li><strong>ä¸‹è½½äºŒè¿›åˆ¶ Blobs</strong>ï¼šè®¿é—® <a href="https://developers.google.com/android/drivers">Google Drivers</a> è·å–å¯¹åº”è®¾å¤‡é©±åŠ¨</li>
<li><strong>æå–å‚å•†é•œåƒ</strong>ï¼šä½¿ç”¨ <code>extract-files.sh</code> ä»å·²å®‰è£…è®¾å¤‡æå–</li>
</ul>
<hr>
<h2 id="å…«-æ³•å¾‹ä¸è®¸å¯é¡»çŸ¥">å…«ã€æ³•å¾‹ä¸è®¸å¯é¡»çŸ¥</h2>
<ul>
<li><strong>GPL åˆè§„</strong>ï¼šä¿®æ”¹å†…æ ¸ä»£ç éœ€å¼€æºï¼ˆå¦‚ä½¿ç”¨ <code>kernel/</code> ç›®å½•ä»£ç ï¼‰</li>
<li><strong>Apache 2.0</strong>ï¼šåº”ç”¨å±‚ä»£ç ä¿®æ”¹éœ€ä¿ç•™ç‰ˆæƒå£°æ˜</li>
<li><strong>GMS æˆæƒ</strong>ï¼šé¢„è£… Google æœåŠ¡éœ€é€šè¿‡ <a href="https://www.android.com/gms/">GMS è®¤è¯</a></li>
</ul>
<hr>
<p>é€šè¿‡æ·±å…¥ AOSP å¼€å‘ï¼Œæ‚¨å°†å…¨é¢æŒæ¡ Android ç³»ç»Ÿçš„åº•å±‚æœºåˆ¶ã€‚å»ºè®®ä»æ¨¡å—åŒ–ä¿®æ”¹ï¼ˆå¦‚å®šåˆ¶å¼€æœºåŠ¨ç”»ï¼‰å…¥æ‰‹ï¼Œé€æ­¥æ·±å…¥ Framework ä¸ HAL å±‚å¼€å‘ã€‚æ›´å¤šèµ„æºè¯·å‚è€ƒ <a href="https://source.android.com/">AOSP å®˜æ–¹æ–‡æ¡£</a>ã€‚ ğŸ› ï¸ğŸ“±</p>

            </div>
            
            
              <div class="next-post">
                <div class="next">ä¸‹ä¸€ç¯‡</div>
                <a href="https://huts1234.github.io/web-qian-hou-duan/">
                  <h3 class="post-title">
                    Webå‰åç«¯
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>


  <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad()
  </script>





  </body>
</html>
