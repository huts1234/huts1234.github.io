<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>Docker | Gridea</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://huts1234.github.io/favicon.ico?v=1764722134508">
<link rel="stylesheet" href="https://huts1234.github.io/styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="Dockerå®¹å™¨æ·±åº¦æŒ‡å—

ä¸€ã€Dockeræ ¸å¿ƒæ¦‚å¿µ
1. Docker vs è™šæ‹Ÿæœº



ç»´åº¦
Dockerå®¹å™¨
è™šæ‹Ÿæœºï¼ˆVMï¼‰




è™šæ‹ŸåŒ–å±‚çº§
æ“ä½œç³»ç»Ÿçº§ï¼ˆå…±äº«å®¿ä¸»æœºå†…æ ¸ï¼‰
ç¡¬ä»¶çº§ï¼ˆç‹¬ç«‹å†…æ ¸ï¼‰


å¯åŠ¨é€Ÿåº¦
ç§’çº§ï¼ˆæ¯«ç§’çº§ï¼‰
åˆ†é’Ÿçº§..." />
    <meta name="keywords" content="" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://huts1234.github.io">
        <img src="https://huts1234.github.io/images/avatar.png?v=1764722134508" class="site-logo">
        <h1 class="site-title">Gridea</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            é¦–é¡µ
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            å½’æ¡£
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            æ ‡ç­¾
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            å…³äº
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      æ¸©æ•…è€ŒçŸ¥æ–°
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://huts1234.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">Docker</h2>
            <div class="post-date">2025-11-28</div>
            
            <div class="post-content" v-pre>
              <h1 id="dockerå®¹å™¨æ·±åº¦æŒ‡å—">Dockerå®¹å™¨æ·±åº¦æŒ‡å—</h1>
<hr>
<h2 id="ä¸€-dockeræ ¸å¿ƒæ¦‚å¿µ">ä¸€ã€Dockeræ ¸å¿ƒæ¦‚å¿µ</h2>
<h3 id="1-docker-vs-è™šæ‹Ÿæœº">1. Docker vs è™šæ‹Ÿæœº</h3>
<table>
<thead>
<tr>
<th><strong>ç»´åº¦</strong></th>
<th><strong>Dockerå®¹å™¨</strong></th>
<th><strong>è™šæ‹Ÿæœºï¼ˆVMï¼‰</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>è™šæ‹ŸåŒ–å±‚çº§</td>
<td>æ“ä½œç³»ç»Ÿçº§ï¼ˆå…±äº«å®¿ä¸»æœºå†…æ ¸ï¼‰</td>
<td>ç¡¬ä»¶çº§ï¼ˆç‹¬ç«‹å†…æ ¸ï¼‰</td>
</tr>
<tr>
<td>å¯åŠ¨é€Ÿåº¦</td>
<td>ç§’çº§ï¼ˆæ¯«ç§’çº§ï¼‰</td>
<td>åˆ†é’Ÿçº§</td>
</tr>
<tr>
<td>èµ„æºå ç”¨</td>
<td>ä½ï¼ˆä»…è¿›ç¨‹æ‰€éœ€èµ„æºï¼‰</td>
<td>é«˜ï¼ˆéœ€åˆ†é…å›ºå®šCPU/å†…å­˜ï¼‰</td>
</tr>
<tr>
<td>éš”ç¦»æ€§</td>
<td>è¿›ç¨‹çº§éš”ç¦»ï¼ˆè¾ƒè™šæ‹Ÿæœºå¼±ï¼‰</td>
<td>å®Œå…¨éš”ç¦»</td>
</tr>
<tr>
<td>é•œåƒä½“ç§¯</td>
<td>é€šå¸¸ä¸ºMBçº§ï¼ˆå¦‚Alpineé•œåƒä»…5MBï¼‰</td>
<td>GBçº§ï¼ˆå®Œæ•´æ“ä½œç³»ç»Ÿï¼‰</td>
</tr>
</tbody>
</table>
<h3 id="2-æ ¸å¿ƒç»„ä»¶">2. æ ¸å¿ƒç»„ä»¶</h3>
<ul>
<li><strong>é•œåƒï¼ˆImageï¼‰</strong>ï¼šåªè¯»æ¨¡æ¿ï¼ˆå¦‚<code>nginx:alpine</code>ï¼‰ï¼ŒåŒ…å«åº”ç”¨åŠå…¶ä¾èµ–</li>
<li><strong>å®¹å™¨ï¼ˆContainerï¼‰</strong>ï¼šé•œåƒçš„è¿è¡Œå®ä¾‹ï¼ˆå¯è¯»å†™å±‚ï¼‰</li>
<li><strong>ä»“åº“ï¼ˆRegistryï¼‰</strong>ï¼šé•œåƒå­˜å‚¨ä¸­å¿ƒï¼ˆé»˜è®¤Docker Hubï¼Œç§æœ‰ä»“åº“å¦‚Harborï¼‰</li>
<li><strong>Dockerfile</strong>ï¼šå®šä¹‰é•œåƒæ„å»ºæ­¥éª¤çš„è„šæœ¬æ–‡ä»¶</li>
<li><strong>Docker Compose</strong>ï¼šé€šè¿‡YAMLæ–‡ä»¶ç®¡ç†å¤šå®¹å™¨åº”ç”¨</li>
</ul>
<hr>
<h2 id="äºŒ-dockerå®‰è£…ä¸é…ç½®">äºŒã€Dockerå®‰è£…ä¸é…ç½®</h2>
<h3 id="1-å®‰è£…dockerå¼•æ“">1. å®‰è£…Dockerå¼•æ“</h3>
<pre><code class="language-bash"># Linuxé€šç”¨å®‰è£…è„šæœ¬
curl -fsSL https://get.docker.com | sudo sh

# éªŒè¯å®‰è£…
sudo docker run hello-world
</code></pre>
<h3 id="2-é…ç½®é•œåƒåŠ é€Ÿå›½å†…">2. é…ç½®é•œåƒåŠ é€Ÿï¼ˆå›½å†…ï¼‰</h3>
<pre><code class="language-bash"># åˆ›å»ºé…ç½®æ–‡ä»¶
sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json &lt;&lt;-'EOF'
{
  &quot;registry-mirrors&quot;: [
    &quot;https://dockerproxy.com&quot;,
    &quot;https://hub-mirror.c.163.com&quot;
  ]
}
EOF

# é‡å¯æœåŠ¡
sudo systemctl restart docker
</code></pre>
<hr>
<h2 id="ä¸‰-dockeræ ¸å¿ƒæ“ä½œ">ä¸‰ã€Dockeræ ¸å¿ƒæ“ä½œ</h2>
<h3 id="1-é•œåƒç®¡ç†">1. é•œåƒç®¡ç†</h3>
<table>
<thead>
<tr>
<th><strong>æ“ä½œ</strong></th>
<th><strong>å‘½ä»¤ç¤ºä¾‹</strong></th>
<th><strong>è¯´æ˜</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>æ‹‰å–é•œåƒ</td>
<td><code>docker pull nginx:alpine</code></td>
<td>æŒ‡å®šæ ‡ç­¾ä¸‹è½½é•œåƒ</td>
</tr>
<tr>
<td>åˆ—å‡ºé•œåƒ</td>
<td><code>docker images</code> æˆ– <code>docker image ls</code></td>
<td>æ˜¾ç¤ºæœ¬åœ°é•œåƒåˆ—è¡¨</td>
</tr>
<tr>
<td>åˆ é™¤é•œåƒ</td>
<td><code>docker rmi &lt;image_id&gt;</code></td>
<td>æ¸…ç†æœªä½¿ç”¨çš„é•œåƒ</td>
</tr>
<tr>
<td>æ„å»ºé•œåƒ</td>
<td><code>docker build -t myapp:v1 .</code></td>
<td>æ ¹æ®Dockerfileæ„å»ºé•œåƒ</td>
</tr>
</tbody>
</table>
<h3 id="2-å®¹å™¨ç”Ÿå‘½å‘¨æœŸ">2. å®¹å™¨ç”Ÿå‘½å‘¨æœŸ</h3>
<table>
<thead>
<tr>
<th><strong>æ“ä½œ</strong></th>
<th><strong>å‘½ä»¤ç¤ºä¾‹</strong></th>
<th><strong>è¯´æ˜</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>å¯åŠ¨æ–°å®¹å™¨</td>
<td><code>docker run -d --name mynginx -p 80:80 nginx</code></td>
<td>-dåå°è¿è¡Œï¼Œ-pç«¯å£æ˜ å°„</td>
</tr>
<tr>
<td>åˆ—å‡ºè¿è¡Œä¸­å®¹å™¨</td>
<td><code>docker ps</code></td>
<td>æ·»åŠ <code>-a</code>æ˜¾ç¤ºæ‰€æœ‰å®¹å™¨</td>
</tr>
<tr>
<td>åœæ­¢/å¯åŠ¨å®¹å™¨</td>
<td><code>docker stop mynginx</code> æˆ– <code>docker start mynginx</code></td>
<td>å¼ºåˆ¶åœæ­¢ç”¨<code>docker kill</code></td>
</tr>
<tr>
<td>è¿›å…¥å®¹å™¨ç»ˆç«¯</td>
<td><code>docker exec -it mynginx /bin/sh</code></td>
<td>äº¤äº’å¼æ‰§è¡Œå‘½ä»¤ï¼ˆæ¨è<code>sh</code>æˆ–<code>bash</code>ï¼‰</td>
</tr>
<tr>
<td>æŸ¥çœ‹å®¹å™¨æ—¥å¿—</td>
<td><code>docker logs -f mynginx</code></td>
<td>å®æ—¶è·Ÿè¸ªæ—¥å¿—è¾“å‡º</td>
</tr>
<tr>
<td>åˆ é™¤å®¹å™¨</td>
<td><code>docker rm mynginx</code></td>
<td>å¼ºåˆ¶åˆ é™¤è¿è¡Œä¸­å®¹å™¨åŠ <code>-f</code></td>
</tr>
</tbody>
</table>
<hr>
<h2 id="å››-dockeræ•°æ®æŒä¹…åŒ–">å››ã€Dockeræ•°æ®æŒä¹…åŒ–</h2>
<h3 id="1-æ•°æ®å·volumes">1. æ•°æ®å·ï¼ˆVolumesï¼‰</h3>
<pre><code class="language-bash"># åˆ›å»ºå¹¶æŒ‚è½½æ•°æ®å·
docker run -d --name mysql \
  -v mysql_data:/var/lib/mysql \
  -e MYSQL_ROOT_PASSWORD=123456 \
  mysql:8.0
</code></pre>
<ul>
<li><strong>æŸ¥çœ‹å·ä¿¡æ¯</strong>ï¼š<code>docker volume inspect mysql_data</code></li>
</ul>
<h3 id="2-ç»‘å®šæŒ‚è½½bind-mounts">2. ç»‘å®šæŒ‚è½½ï¼ˆBind Mountsï¼‰</h3>
<pre><code class="language-bash"># æŒ‚è½½å®¿ä¸»æœºç›®å½•åˆ°å®¹å™¨
docker run -d --name myapp \
  -v /host/path:/container/path \
  myapp:v1
</code></pre>
<hr>
<h2 id="äº”-dockerç½‘ç»œæ¨¡å‹">äº”ã€Dockerç½‘ç»œæ¨¡å‹</h2>
<h3 id="1-ç½‘ç»œæ¨¡å¼">1. ç½‘ç»œæ¨¡å¼</h3>
<table>
<thead>
<tr>
<th><strong>æ¨¡å¼</strong></th>
<th><strong>æè¿°</strong></th>
<th><strong>åº”ç”¨åœºæ™¯</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>bridgeï¼ˆé»˜è®¤ï¼‰</td>
<td>åˆ›å»ºè™šæ‹Ÿç½‘æ¡¥ï¼Œå®¹å™¨é€šè¿‡NATé€šä¿¡</td>
<td>å•ä¸»æœºå¤šå®¹å™¨éš”ç¦»ç¯å¢ƒ</td>
</tr>
<tr>
<td>host</td>
<td>å®¹å™¨å…±äº«å®¿ä¸»æœºç½‘ç»œæ ˆ</td>
<td>é«˜æ€§èƒ½éœ€æ±‚ï¼ˆå¦‚ç½‘ç»œç›‘æ§å·¥å…·ï¼‰</td>
</tr>
<tr>
<td>none</td>
<td>æ— ç½‘ç»œæ¥å£</td>
<td>ç‰¹æ®Šå®‰å…¨åœºæ™¯</td>
</tr>
<tr>
<td>overlay</td>
<td>è·¨ä¸»æœºå®¹å™¨é€šä¿¡ï¼ˆSwarmé›†ç¾¤ï¼‰</td>
<td>åˆ†å¸ƒå¼åº”ç”¨</td>
</tr>
</tbody>
</table>
<h3 id="2-è‡ªå®šä¹‰ç½‘ç»œ">2. è‡ªå®šä¹‰ç½‘ç»œ</h3>
<pre><code class="language-bash"># åˆ›å»ºè‡ªå®šä¹‰ç½‘ç»œ
docker network create mynet

# è¿è¡Œå®¹å™¨å¹¶åŠ å…¥ç½‘ç»œ
docker run -d --name web --network mynet nginx
docker run -d --name db --network mynet mysql
</code></pre>
<hr>
<h2 id="å…­-docker-composeç¼–æ’">å…­ã€Docker Composeç¼–æ’</h2>
<h3 id="1-å®‰è£…docker-compose">1. å®‰è£…Docker Compose</h3>
<pre><code class="language-bash"># ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆæ›¿æ¢ç‰ˆæœ¬å·ï¼‰
sudo curl -L &quot;https://github.com/docker/compose/releases/download/v2.25.0/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
</code></pre>
<h3 id="2-ç¼–å†™docker-composeyml">2. ç¼–å†™<code>docker-compose.yml</code></h3>
<pre><code class="language-yaml">version: '3.8'

services:
  web:
    image: nginx:alpine
    ports:
      - &quot;80:80&quot;
    volumes:
      - ./html:/usr/share/nginx/html
    networks:
      - mynet

  db:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: 123456
    volumes:
      - mysql_data:/var/lib/mysql
    networks:
      - mynet

volumes:
  mysql_data:

networks:
  mynet:
</code></pre>
<h3 id="3-å¸¸ç”¨å‘½ä»¤">3. å¸¸ç”¨å‘½ä»¤</h3>
<pre><code class="language-bash">docker-compose up -d    # å¯åŠ¨æœåŠ¡
docker-compose down     # åœæ­¢å¹¶åˆ é™¤å®¹å™¨
docker-compose logs -f  # æŸ¥çœ‹æ—¥å¿—
</code></pre>
<hr>
<h2 id="ä¸ƒ-æœ€ä½³å®è·µä¸å®‰å…¨">ä¸ƒã€æœ€ä½³å®è·µä¸å®‰å…¨</h2>
<h3 id="1-é•œåƒä¼˜åŒ–">1. é•œåƒä¼˜åŒ–</h3>
<ul>
<li><strong>å¤šé˜¶æ®µæ„å»º</strong>ï¼šå‡å°‘æœ€ç»ˆé•œåƒä½“ç§¯<pre><code class="language-dockerfile">FROM golang:1.20 AS builder
WORKDIR /app
COPY . .
RUN go build -o myapp .

FROM alpine:3.18
COPY --from=builder /app/myapp /usr/local/bin/
CMD [&quot;myapp&quot;]
</code></pre>
</li>
</ul>
<h3 id="2-å®‰å…¨å»ºè®®">2. å®‰å…¨å»ºè®®</h3>
<ul>
<li><strong>érootç”¨æˆ·è¿è¡Œ</strong>ï¼š<pre><code class="language-dockerfile">FROM alpine
RUN adduser -D myuser
USER myuser
</code></pre>
</li>
<li><strong>å®šæœŸæ›´æ–°é•œåƒ</strong>ï¼š<code>docker scan</code>æ£€æµ‹æ¼æ´</li>
<li><strong>é™åˆ¶èµ„æº</strong>ï¼š<pre><code class="language-bash">docker run -d --memory=512m --cpus=1 myapp
</code></pre>
</li>
</ul>
<hr>
<h2 id="å…«-å¸¸è§é—®é¢˜è§£å†³">å…«ã€å¸¸è§é—®é¢˜è§£å†³</h2>
<h3 id="1-å®¹å™¨å¯åŠ¨å¤±è´¥">1. å®¹å™¨å¯åŠ¨å¤±è´¥</h3>
<ul>
<li><strong>æŸ¥çœ‹æ—¥å¿—</strong>ï¼š<code>docker logs &lt;container_id&gt;</code></li>
<li><strong>æ£€æŸ¥ç«¯å£å†²çª</strong>ï¼š<code>netstat -tuln \| grep 80</code></li>
</ul>
<h3 id="2-ç½‘ç»œä¸é€š">2. ç½‘ç»œä¸é€š</h3>
<ul>
<li><strong>éªŒè¯é˜²ç«å¢™</strong>ï¼š<code>ufw allow 80/tcp</code></li>
<li><strong>æ£€æŸ¥DNSé…ç½®</strong>ï¼š<code>docker run --dns 8.8.8.8 nginx</code></li>
</ul>
<h3 id="3-æ•°æ®å·æƒé™é—®é¢˜">3. æ•°æ®å·æƒé™é—®é¢˜</h3>
<ul>
<li><strong>è®¾ç½®æ–‡ä»¶æƒé™</strong>ï¼šåœ¨Dockerfileä¸­æ·»åŠ <code>chmod</code>å‘½ä»¤<pre><code class="language-dockerfile">RUN chmod 755 /app/data
</code></pre>
</li>
</ul>
<hr>
<p>Dockerå®¹å™¨æŠ€æœ¯æå¤§ç®€åŒ–äº†åº”ç”¨éƒ¨ç½²ä¸ç»´æŠ¤æµç¨‹ï¼Œç»“åˆKubernetesç­‰ç¼–æ’å·¥å…·ï¼Œå¯æ„å»ºé«˜æ•ˆå¯é çš„äº‘åŸç”Ÿæ¶æ„ã€‚ ğŸ³ğŸš€</p>

            </div>
            
            
              <div class="next-post">
                <div class="next">ä¸‹ä¸€ç¯‡</div>
                <a href="https://huts1234.github.io/deepin/">
                  <h3 class="post-title">
                    Deepin
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>


  <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad()
  </script>





  </body>
</html>
